<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ç”ŸæˆAIãƒ‘ã‚¹ãƒãƒ¼ãƒˆè©¦é¨“å•é¡Œé›†_V1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; background: #f0f8ff; padding: 20px; }
    .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; max-width: 600px; margin: auto; }
    button, select { margin-top: 10px; padding: 10px; font-size: 16px; width: 100%; }
    .small { font-size: 14px; color: #666; }
    hr { margin: 20px 0; }
  </style>
</head>
<body>
  <div class="card" id="app">
    <h2>ç”ŸæˆAIãƒ‘ã‚¹ãƒãƒ¼ãƒˆè©¦é¨“å•é¡Œé›†_V1</h2>
    <select id="chapterSelect">
      <option value="">ç« ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
      <option value="ç¬¬1ç« ">ç¬¬1ç« ï¼šAIã®æ¦‚è¦</option>
      <option value="ç¬¬2ç« ">ç¬¬2ç« ï¼šæ©Ÿæ¢°å­¦ç¿’ã®ç¨®é¡</option>
    </select>
    <button onclick="startQuiz()">ã“ã®ç« ã§ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹</button>
    <button onclick="showHistoryList()">å±¥æ­´ä¸€è¦§ã‚’è¦‹ã‚‹</button>
  </div>

  <script>
    const chapters = {
      "ç¬¬1ç« ": [
        {
          question: "AIã¨ã¯ä½•ã®ç•¥ï¼Ÿ",
          options: ["Advanced Intelligence", "Artificial Intelligence", "Automated Interface", "Algorithmic Integration"],
          answer: 1,
          explanation: "AIã¯ã€ŒArtificial Intelligenceï¼ˆäººå·¥çŸ¥èƒ½ï¼‰ã€ã®ç•¥ã§ã™ã€‚"
        },
        {
          question: "ç”ŸæˆAIã®ç‰¹å¾´ã¯ï¼Ÿ",
          options: ["æƒ…å ±æ¤œç´¢ã ã‘ã®æŠ€è¡“", "å›ºå®šçŸ¥è­˜ã‚’ä½¿ã†æŠ€è¡“", "æ–°ã—ã„æ–‡ç« ã‚„ç”»åƒã‚’ç”Ÿæˆã™ã‚‹èƒ½åŠ›", "æ„Ÿæƒ…ã‚’ç†è§£ã™ã‚‹æŠ€è¡“"],
          answer: 2,
          explanation: "ç”ŸæˆAIã¯æ–°ã—ã„æ–‡ç« ã‚„ç”»åƒãªã©ã‚’ç”Ÿæˆã™ã‚‹èƒ½åŠ›ã‚’æŒã¤AIã§ã™ã€‚"
        }
      ],
      "ç¬¬2ç« ": [
        {
          question: "æ•™å¸«ãªã—å­¦ç¿’ã®ä»£è¡¨çš„ãªæ‰‹æ³•ã¯ï¼Ÿ",
          options: ["ç·šå½¢å›å¸°", "K-meansã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°", "SVM", "æ±ºå®šæœ¨"],
          answer: 1,
          explanation: "K-meansã¯ãƒ©ãƒ™ãƒ«ãªã—ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†é¡ã™ã‚‹æ•™å¸«ãªã—å­¦ç¿’ã®ä»£è¡¨ä¾‹ã§ã™ã€‚"
        },
        {
          question: "å¼·åŒ–å­¦ç¿’ã®ç‰¹å¾´ã¯ï¼Ÿ",
          options: ["ãƒ©ãƒ™ãƒ«ä»˜ããƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†", "å ±é…¬ã‚’ã‚‚ã¨ã«å­¦ç¿’ã™ã‚‹", "æ•™å¸«ãªã—ã§åˆ†é¡ã™ã‚‹", "ç”»åƒèªè­˜ã«ç‰¹åŒ–ã™ã‚‹"],
          answer: 1,
          explanation: "å¼·åŒ–å­¦ç¿’ã¯å ±é…¬ã‚’ã‚‚ã¨ã«è¡Œå‹•ã‚’æœ€é©åŒ–ã™ã‚‹å­¦ç¿’æ‰‹æ³•ã§ã™ã€‚"
        }
      ]
    };

    let currentQuiz = [];
    let currentIndex = 0;
    let wrongAnswers = [];
    let selectedChapter = "";

    function startQuiz() {
      const chapter = document.getElementById("chapterSelect").value;
      if (!chapter) return alert("ç« ã‚’é¸æŠã—ã¦ãã ã•ã„");
      selectedChapter = chapter;
      const questions = chapters[chapter];
      currentQuiz = shuffle([...questions]).slice(0, 10);
      currentIndex = 0;
      wrongAnswers = [];
      showQuestion();
    }

    function showQuestion() {
      const q = currentQuiz[currentIndex];
      const app = document.getElementById("app");
      app.innerHTML = `<h2>${selectedChapter}ï½œQ${currentIndex + 1}</h2><p>${q.question}</p>`;
      q.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(i);
        app.appendChild(btn);
      });
    }

    function checkAnswer(selected) {
      const q = currentQuiz[currentIndex];
      const app = document.getElementById("app");
      const result = document.createElement("p");
      if (selected === q.answer) {
        result.textContent = "âœ… æ­£è§£ï¼ " + q.explanation;
      } else {
        result.textContent = "âŒ ä¸æ­£è§£... " + q.explanation;
        wrongAnswers.push(q);
      }
      app.innerHTML = "";
      app.appendChild(result);
      const nextBtn = document.createElement("button");
      nextBtn.textContent = "ã¤ãã¸";
      nextBtn.onclick = nextQuestion;
      app.appendChild(nextBtn);
    }

    function nextQuestion() {
      currentIndex++;
      if (currentIndex < currentQuiz.length) {
        showQuestion();
      } else {
        saveHistory();
        showReview();
      }
    }

    function saveHistory() {
      const newRecord = {
        date: new Date().toLocaleString(),
        chapter: selectedChapter,
        correct: currentQuiz.length - wrongAnswers.length,
        total: currentQuiz.length,
        wrong: wrongAnswers,
        reviewed: false
      };
      const history = JSON.parse(localStorage.getItem("quiz_history") || "[]");
      history.push(newRecord);
      localStorage.setItem("quiz_history", JSON.stringify(history));
    }

    function showReview() {
      const app = document.getElementById("app");
      app.innerHTML = `<h2>ğŸ“˜ å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼š${selectedChapter}</h2>
        <p>âœ… æ­£è§£æ•°ï¼š${currentQuiz.length - wrongAnswers.length} / ${currentQuiz.length}</p>
        <p>ğŸ” é–“é•ãˆãŸå•é¡Œï¼š${wrongAnswers.length}å•</p><hr>`;
      wrongAnswers.forEach((q, i) => {
        const div = document.createElement("div");
        div.innerHTML = `<p><strong>Q${i+1}:</strong> ${q.question}<br>âœ… æ­£è§£: ${q.options[q.answer]}<br>ğŸ“˜ ${q.explanation}</p><hr>`;
        app.appendChild(div);
      });
      const backBtn = document.createElement("button");
      backBtn.textContent = "ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹";
      backBtn.onclick = () => location.reload();
      app.appendChild(backBtn);
    }

    function showHistoryList() {
      const history = JSON.parse(localStorage.getItem("quiz_history") || "[]");
      const app = document.getElementById("app");
      app.innerHTML = `<h2>ğŸ“š å±¥æ­´ä¸€è¦§</h2>`;
      history.forEach((record, i) => {
        const div = document.createElement("div");
        div.innerHTML = `
          <p><strong>${record.chapter}</strong>ï¼ˆ${record.date}ï¼‰<br>
          âœ… ${record.correct}/${record.total}å•æ­£è§£<br>
          ğŸ” é–“é•ã„ï¼š${record.wrong.length}å•<br>
          ğŸ“˜ å¾©ç¿’ï¼š${record.reviewed ? "æ¸ˆ" : "æœª"}</p>
          <button onclick="reviewSession(${i})">å¾©ç¿’ã™ã‚‹</button><hr>`;
        app.appendChild(div);
      });
      const backBtn = document.createElement("button");
      backBtn.textContent = "ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹";
      backBtn.onclick = () => location.reload();
      app.appendChild(backBtn);
    }

    function reviewSession(index) {
      const history = JSON.parse(localStorage.getItem("quiz_history") || "[]");
      const session = history[index];
      const app = document.getElementById("app");
      app.innerHTML = `<h2>ğŸ” å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼š${session.chapter}</h2>`;
      session.wrong.forEach((q, i) => {
        const div = document.createElement("div");
        div.innerHTML = `<p><strong>Q${i+1}:</strong> ${q.question}<br>âœ… æ­£è§£: ${q.options[q.answer]}<br>ğŸ“˜ ${q.explanation}</p><hr>`;
        app.appendChild(div);
      });
      session.reviewed = true;
      localStorage.setItem("quiz_history", JSON.stringify(history));
      const backBtn = document.createElement("button");
      backBtn.textContent = "ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹";
      backBtn.onclick = () => location.reload();
      app.appendChild(backBtn);
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
  </script>
</body>
</html>
